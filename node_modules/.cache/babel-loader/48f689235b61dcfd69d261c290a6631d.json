{"ast":null,"code":"import _regeneratorRuntime from \"/Users/austinirvine/Documents/genlouise/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/austinirvine/Documents/genlouise/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"/Users/austinirvine/Documents/genlouise/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/austinirvine/Documents/genlouise/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/austinirvine/Documents/genlouise/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/austinirvine/Documents/genlouise/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/austinirvine/Documents/genlouise/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/austinirvine/Documents/genlouise/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/austinirvine/Documents/genlouise/src/views/SignIn/index.jsx\";\nimport React, { Component } from 'react';\nimport { Link, withRouter } from 'react-router-dom'; // Externals\n\nimport PropTypes from 'prop-types';\nimport compose from 'recompose/compose';\nimport validate from 'validate.js';\nimport _ from 'underscore'; // Material helpers\n\nimport { withStyles } from '@material-ui/core'; // Material components\n\nimport { Grid, Button, CircularProgress, TextField, Typography } from '@material-ui/core';\nimport { Cancel } from '@material-ui/icons'; // Component styles\n\nimport styles from './styles';\n/*import SweetAlert from 'sweetalert2';*/\n// Form validation schema\n\nimport schema from './schema';\nimport { Footer } from '../../layouts/Dashboard/components';\nimport LoginService from '../../services/login/index'; // Service methods\n\nvar signIn = function signIn(credentials) {\n  return LoginService.login(credentials);\n  /*  return new Promise(resolve => {\n      setTimeout(() => {\n        resolve(true);\n      }, 1500);\n    });*/\n};\n\nvar SignIn =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SignIn, _Component);\n\n  function SignIn() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, SignIn);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(SignIn)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      values: {\n        email: '',\n        password: ''\n      },\n      touched: {\n        email: false,\n        password: false\n      },\n      errors: {\n        email: null,\n        password: null\n      },\n      isValid: false,\n      isLoading: false,\n      submitError: null,\n      showSignInError: null\n    };\n\n    _this.handleBack = function () {\n      var history = _this.props.history;\n      history.goBack();\n    };\n\n    _this.validateForm = _.debounce(function () {\n      var values = _this.state.values;\n\n      var newState = _objectSpread({}, _this.state);\n\n      var errors = validate(values, schema);\n      newState.errors = errors || {};\n      newState.isValid = errors ? false : true;\n\n      _this.setState(newState);\n    }, 300);\n\n    _this.handleFieldChange = function (field, value) {\n      var newState = _objectSpread({}, _this.state);\n\n      newState.submitError = null;\n      newState.touched[field] = true;\n      newState.values[field] = value;\n\n      _this.setState(newState, _this.validateForm);\n    };\n\n    _this.handleSignIn =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var history, values, loginResult;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              history = _this.props.history;\n              values = _this.state.values;\n\n              _this.setState({\n                isLoading: true\n              });\n\n              _this.setState({\n                showSignInError: false\n              });\n\n              _context.next = 7;\n              return signIn({\n                email: values.email,\n                password: values.password\n              });\n\n            case 7:\n              loginResult = _context.sent;\n\n              _this.setState({\n                isLoading: false\n              });\n\n              if (loginResult) {\n                localStorage.setItem('isAuthenticated', true);\n                history.push('/dashboard');\n\n                _this.setState({\n                  showSignInError: false\n                });\n              } else {\n                localStorage.setItem('isAuthenticated', true);\n\n                _this.setState({\n                  showSignInError: true\n                });\n              }\n\n              _context.next = 15;\n              break;\n\n            case 12:\n              _context.prev = 12;\n              _context.t0 = _context[\"catch\"](0);\n\n              _this.setState({\n                isLoading: false,\n                serviceError: _context.t0\n              });\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 12]]);\n    }));\n    return _this;\n  }\n\n  _createClass(SignIn, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var classes = this.props.classes;\n      var _this$state = this.state,\n          values = _this$state.values,\n          touched = _this$state.touched,\n          errors = _this$state.errors,\n          isValid = _this$state.isValid,\n          submitError = _this$state.submitError,\n          isLoading = _this$state.isLoading,\n          showSignInError = _this$state.showSignInError;\n      var showEmailError = touched.email && errors.email;\n      var showPasswordError = touched.password && errors.password;\n      /*    SweetAlert.fire({\n        title: 'Error!',\n        text: 'Do you want to continue',\n        type: 'error',\n        confirmButtonText: 'Cool'\n      });*/\n\n      return React.createElement(\"div\", {\n        className: classes.root,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        className: classes.grid,\n        container: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        className: classes.quoteWrapper,\n        item: true,\n        lg: 5,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: classes.quote,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: classes.quoteInner,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        className: classes.quoteText,\n        variant: \"h1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, \"Hella narwhal Cosby sweater McSweeney's, salvia kitsch before they sold out High Life.\"), React.createElement(\"div\", {\n        className: classes.person,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        className: classes.name,\n        variant: \"body1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, \"Takamaru Ayako\"), React.createElement(Typography, {\n        className: classes.bio,\n        variant: \"body2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, \"Manager at inVision\"))))), React.createElement(Grid, {\n        className: classes.content,\n        item: true,\n        lg: 7,\n        xs: 12,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: classes.content,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: classes.contentBody,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        className: classes.form,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        className: classes.title,\n        variant: \"h2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, \"Sign in\"), React.createElement(\"div\", {\n        className: classes.fields,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        className: classes.textField,\n        label: \"Email address\",\n        name: \"email\",\n        onChange: function onChange(event) {\n          return _this2.handleFieldChange('email', event.target.value);\n        },\n        type: \"text\",\n        value: values.email,\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }), showEmailError && React.createElement(Typography, {\n        className: classes.fieldError,\n        variant: \"body2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, errors.email[0]), React.createElement(TextField, {\n        className: classes.textField,\n        label: \"Password\",\n        name: \"password\",\n        onChange: function onChange(event) {\n          return _this2.handleFieldChange('password', event.target.value);\n        },\n        type: \"password\",\n        value: values.password,\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }), showPasswordError && React.createElement(Typography, {\n        className: classes.fieldError,\n        variant: \"body2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      }, errors.password[0])), submitError && React.createElement(Typography, {\n        className: classes.submitError,\n        variant: \"body2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }, submitError), isLoading ? React.createElement(CircularProgress, {\n        className: classes.progress,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }) : React.createElement(Button, {\n        className: classes.signInButton,\n        color: \"primary\",\n        disabled: !isValid,\n        onClick: this.handleSignIn,\n        size: \"large\",\n        variant: \"contained\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }, \"Sign in now\"), showSignInError && React.createElement(Typography, {\n        className: classes.signInError,\n        variant: \"subtitle2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259\n        },\n        __self: this\n      }, React.createElement(Cancel, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263\n        },\n        __self: this\n      }), \"Username or password is wrong.\"), React.createElement(Typography, {\n        className: classes.signUp,\n        variant: \"body1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268\n        },\n        __self: this\n      }, \"Don't have an account?\", ' ', React.createElement(Link, {\n        className: classes.signUpUrl,\n        to: \"/sign-up\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273\n        },\n        __self: this\n      }, \"Sign up\")))), React.createElement(Footer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return SignIn;\n}(Component);\n\nSignIn.propTypes = {\n  className: PropTypes.string,\n  classes: PropTypes.object.isRequired,\n  history: PropTypes.object.isRequired\n};\nexport default compose(withRouter, withStyles(styles))(SignIn);","map":{"version":3,"sources":["/Users/austinirvine/Documents/genlouise/src/views/SignIn/index.jsx"],"names":["React","Component","Link","withRouter","PropTypes","compose","validate","_","withStyles","Grid","Button","CircularProgress","TextField","Typography","Cancel","styles","schema","Footer","LoginService","signIn","credentials","login","SignIn","state","values","email","password","touched","errors","isValid","isLoading","submitError","showSignInError","handleBack","history","props","goBack","validateForm","debounce","newState","setState","handleFieldChange","field","value","handleSignIn","loginResult","localStorage","setItem","push","serviceError","classes","showEmailError","showPasswordError","root","grid","quoteWrapper","quote","quoteInner","quoteText","person","name","bio","content","contentBody","form","title","fields","textField","event","target","fieldError","progress","signInButton","signInError","signUp","signUpUrl","propTypes","className","string","object","isRequired"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {Link, withRouter} from 'react-router-dom';\n\n// Externals\nimport PropTypes from 'prop-types';\nimport compose from 'recompose/compose';\nimport validate from 'validate.js';\nimport _ from 'underscore';\n\n// Material helpers\nimport {withStyles} from '@material-ui/core';\n\n// Material components\nimport {\n  Grid,\n  Button,\n  CircularProgress,\n  TextField,\n  Typography\n} from '@material-ui/core';\n\n\nimport {Cancel} from '@material-ui/icons';\n\n\n// Component styles\nimport styles from './styles';\n\n/*import SweetAlert from 'sweetalert2';*/\n\n// Form validation schema\nimport schema from './schema';\n\nimport {Footer} from '../../layouts/Dashboard/components';\nimport LoginService from '../../services/login/index';\n\n// Service methods\nconst signIn = (credentials) => {\n  return LoginService.login(credentials);\n  /*  return new Promise(resolve => {\n      setTimeout(() => {\n        resolve(true);\n      }, 1500);\n    });*/\n};\n\nclass SignIn extends Component {\n  state = {\n    values: {\n      email: '',\n      password: ''\n    },\n    touched: {\n      email: false,\n      password: false\n    },\n    errors: {\n      email: null,\n      password: null\n    },\n    isValid: false,\n    isLoading: false,\n    submitError: null,\n    showSignInError: null\n  };\n\n  handleBack = () => {\n    const {history} = this.props;\n\n    history.goBack();\n  };\n\n  validateForm = _.debounce(() => {\n    const {values} = this.state;\n\n    const newState = {...this.state};\n    const errors = validate(values, schema);\n\n    newState.errors = errors || {};\n    newState.isValid = errors ? false : true;\n\n    this.setState(newState);\n  }, 300);\n\n  handleFieldChange = (field, value) => {\n    const newState = {...this.state};\n\n    newState.submitError = null;\n    newState.touched[field] = true;\n    newState.values[field] = value;\n\n    this.setState(newState, this.validateForm);\n  };\n\n  handleSignIn = async () => {\n    try {\n      const {history} = this.props;\n      const {values} = this.state;\n\n      this.setState({isLoading: true});\n      this.setState({showSignInError: false});\n\n      let loginResult = await signIn({email: values.email, password: values.password});\n      this.setState({isLoading: false});\n      if (loginResult) {\n        localStorage.setItem('isAuthenticated', true);\n        history.push('/dashboard');\n        this.setState({showSignInError: false});\n      } else {\n        localStorage.setItem('isAuthenticated', true);\n        this.setState({showSignInError: true});\n      }\n    } catch (error) {\n      this.setState({\n        isLoading: false,\n        serviceError: error\n      });\n    }\n  };\n\n  render() {\n    const {classes} = this.props;\n    const {\n      values,\n      touched,\n      errors,\n      isValid,\n      submitError,\n      isLoading,\n      showSignInError\n    } = this.state;\n\n    const showEmailError = touched.email && errors.email;\n    const showPasswordError = touched.password && errors.password;\n\n    /*    SweetAlert.fire({\n      title: 'Error!',\n      text: 'Do you want to continue',\n      type: 'error',\n      confirmButtonText: 'Cool'\n    });*/\n\n\n    return (\n      <div className={classes.root}>\n        <Grid\n          className={classes.grid}\n          container\n        >\n          <Grid\n            className={classes.quoteWrapper}\n            item\n            lg={5}\n          >\n            <div className={classes.quote}>\n              <div className={classes.quoteInner}>\n                <Typography\n                  className={classes.quoteText}\n                  variant=\"h1\"\n                >\n                  Hella narwhal Cosby sweater McSweeney's, salvia kitsch before\n                  they sold out High Life.\n                </Typography>\n                <div className={classes.person}>\n                  <Typography\n                    className={classes.name}\n                    variant=\"body1\"\n                  >\n                    Takamaru Ayako\n                  </Typography>\n                  <Typography\n                    className={classes.bio}\n                    variant=\"body2\"\n                  >\n                    Manager at inVision\n                  </Typography>\n                </div>\n              </div>\n            </div>\n          </Grid>\n          <Grid\n            className={classes.content}\n            item\n            lg={7}\n            xs={12}\n          >\n            <div className={classes.content}>\n              <div className={classes.contentBody}>\n                <form className={classes.form}>\n                  <Typography\n                    className={classes.title}\n                    variant=\"h2\"\n                  >\n                    Sign in\n                  </Typography>\n                  <div className={classes.fields}>\n                    <TextField\n                      className={classes.textField}\n                      label=\"Email address\"\n                      name=\"email\"\n                      onChange={event =>\n                        this.handleFieldChange('email', event.target.value)\n                      }\n                      type=\"text\"\n                      value={values.email}\n                      variant=\"outlined\"\n                    />\n                    {showEmailError && (\n                      <Typography\n                        className={classes.fieldError}\n                        variant=\"body2\"\n                      >\n                        {errors.email[0]}\n                      </Typography>\n                    )}\n                    <TextField\n                      className={classes.textField}\n                      label=\"Password\"\n                      name=\"password\"\n                      onChange={event =>\n                        this.handleFieldChange('password', event.target.value)\n                      }\n                      type=\"password\"\n                      value={values.password}\n                      variant=\"outlined\"\n                    />\n                    {showPasswordError && (\n                      <Typography\n                        className={classes.fieldError}\n                        variant=\"body2\"\n                      >\n                        {errors.password[0]}\n                      </Typography>\n                    )}\n                  </div>\n                  {submitError && (\n                    <Typography\n                      className={classes.submitError}\n                      variant=\"body2\"\n                    >\n                      {submitError}\n                    </Typography>\n                  )}\n                  {isLoading ? (\n                    <CircularProgress className={classes.progress}/>\n                  ) : (\n                    <Button\n                      className={classes.signInButton}\n                      color=\"primary\"\n                      disabled={!isValid}\n                      onClick={this.handleSignIn}\n                      size=\"large\"\n                      variant=\"contained\"\n                    >\n                      Sign in now\n                    </Button>\n                  )}\n                  {showSignInError &&\n                  <Typography\n                    className={classes.signInError}\n                    variant=\"subtitle2\"\n                  >\n                    <Cancel/>\n                    Username or password is wrong.\n                  </Typography>\n                  }\n\n                  <Typography\n                    className={classes.signUp}\n                    variant=\"body1\"\n                  >\n                    Don't have an account?{' '}\n                    <Link\n                      className={classes.signUpUrl}\n                      to=\"/sign-up\"\n                    >\n                      Sign up\n                    </Link>\n                  </Typography>\n                </form>\n              </div>\n              <Footer/>\n            </div>\n          </Grid>\n        </Grid>\n      </div>\n    );\n  }\n}\n\nSignIn.propTypes = {\n  className: PropTypes.string,\n  classes: PropTypes.object.isRequired,\n  history: PropTypes.object.isRequired\n};\n\nexport default compose(\n  withRouter,\n  withStyles(styles)\n)(SignIn);\n"]},"metadata":{},"sourceType":"module"}